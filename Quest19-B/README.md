# Quest 19-B. 서버 아키텍쳐 패턴

## Introduction

- 이번 퀘스트에서는 현대적인 서버 아키텍쳐 패턴에 대해 익혀 보도록 하겠습니다.

## Topics

- Microservice Architecture
- Serverless Architecture
- AWS Lambda
- Service Mesh

## Resources

- [Jeff Bezos의 이메일](https://news.hada.io/topic?id=638)
- [마이크로서비스란?](https://www.redhat.com/ko/topics/microservices/what-are-microservices)
- [AWS Lambda](https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/welcome.html)
- [AWS API Gateway](https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/welcome.html)

## Checklist

- 마이크로서비스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
  > #### 마이크로서비스
  >
  > - 기존의 모노리스 아키텍처 방식의 모든 구성요소가 하나의 시스템에 통합되어있는 형태가 아닌, 서비스를 독립적인 작은 단위로 쪼개고, 독립적인 서비스들을 조합하여서 만드는 방식의 소프트웨어 아키텍처 입니다.
  >   <br>
  >
  > #### 구성하는 방법
  >
  > - 기능분해
  >   - 마이크로서비스의 핵심은 독립적인 서비스 수행에 있으므로, 개별 서비스는 혼자서도 수행이 가능한 독립적인 시스템으로 만들어야 하며, 배포 실행도 독립적으로 가능하게 해야합니다.
  > - 서비스의 언어 및 프레임워크 선택
  >   - 독립적인 서비스이므로 각각 서비스에 맞는 언어나 프레임워크 선택이 유연합니다.
  > - 인프라
  >   - 보통 컨테이너(docker)로 관리하며 컨테이너가 많아지면 쿠버네티스를 사용하여 관리할수 있습니다.
  > - 모니터링
  >   - 각 서비스들을 모니터링하긴 위한 툴의 선택 kafka, ...
  >     <br>
  > #### 장점
  > - 기능 수정 및 업데이트가 빠름
  > - 독립적인 서비스로 인하여 기술 스택 선정에서 자유로움
  > - 트래픽이 몰리곳에 자원을 효율적으로 쓸수가 있어서 클라우드 자원을 효율적으로 사용할 수 있습니다.
- 서버리스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
  > #### 서버리스란?
  >
  > - 서버를 직접 관리하지 않고 클라우드를 통해서 필요한 경우에만 서버 자원을 사용하고, 서버관리는 클라우드측에서 해주는 방식의 개발 방식 입니다.
  > <br>
  > #### 장점
  > - 비용절감
  >   - 서버를 직접 구축하는 비용이 절감되고, 사용한 만큼만 지불하게 됩니다.
  > - 확장이 용이함
  >   - 사용량이 증가함에 따라 자동으로 확장됨
  > - 개발 생산성
  >   - 함수단위로만 구성되기때문에 빠른 개발이 가능합니다.
  > #### 단점
  > - 약간의 지연시간
  >   - 서버를 사용안할땐 잠들어있어서 사용할때 켜지는 시간이 있으므로 지연시간이 발생할 수가 있습니다.
  > - 테스트와 디버깅이 어려워짐
  > - 특정 클라우드 업체에 종속 될수가 있습니다.
  > - 서버를 관리하지 않기에 환경을 완전히 제어할 수 없습니다.
  > - 오래 실행 되는 프로세스에는 적합하지 않음
- AWS Lambda는 어떤 서비스일까요? 이러한 서비스는 어떤 특징을 가지고, 어디에 쓰일 수 있을까요?
  > - AWS에서 제공되는 서버리스 서비스 중 하나입니다.
  > - 특징: 위와 같음(서버리스)
  > - 용도
  >   - 웹 애플리케이션
  >     - API GateWay와 연결되어서 HTTP 요청에 응답하고 할수 있습니다.
  >   - 이벤트 처리
  >     - AWS의 이벤트 처리로 사용됩니다. S3 버킷에 파일이 업로드되거나, DB테이블이 업데이트 될때 람다에 등록된 함수가 트리거되어서 수행 될 수 있습니다.
  >   - 백그라운드 작업
  >     - 예시를 들면, 사용자가 이메일을 전송하면 람다 트리거로 백그라운드에서 이메일을 대신 보내는 방법이 있고, 이렇게 하게 되면 사용자는 이메일 전송이 완료될때 까지 기다릴 필요가 없어집니다.
- API Gateway는 어떤 서비스인가요? 어떤 설정을 할 수 있을까요?
  > - 클라이언트와 마이크로서비스 애플리케이션 간에 인터페이스 역할을 하는 서비스 입니다.
  > - REST API 생성
  > - 인증 및 권한 부여 구성
  > - 요청에 대힌 속도 제한 설정
  > - 데이터 변환 및 로깅 설정
- 많은 마이크로서비스들을 복잡하게 연결할 경우 관리상에 어떤 단점이 생길 수 있을까요? 서비스 메쉬는 무엇이고 이러한 난점을 어떻게 해결하려는 시도일까요?
  > #### 생기는 단점
  > - 많은 마이크로서비스들이 복잡하게 연결되게 되면 운영 및 관리 하는데 있어서 어려움이 생깁니다.
  >   - 서비스 사이들의 의존성이 높아지면서 호환성 문제가 발생할 수 있습니다.
  >   - 서비스 사이의 통신이 많아지면서 네트워크 병목 현상이 발생할 수 있고, 이는 전체 시스템의 성능을 저하시키고, 장애 발생 가능성을 높힙니다.
  >   - 서비스 사이의 보안 문제가 발생할 수 있습니다.
  > #### 서비스 메쉬
  > * 서비스 메쉬는 위와 같은 문제들을 해결하기 위한 기술 중 하나 이며, 서비스 간 통신을 관리하기위한 방법론 입니다.
  > * 사이드카 프록시라는 형태로 구현됩니다.
  >   - 사이드카 패턴
  >     - 기본 컨테이너의 기능을 확장하거나 강화하는 용도로 별도의 컨테이너를 추가하는 패턴입니다.
  > * 요청을 프록시를 통해 서비스간에 라우팅을 하면서 각 서비스의 통신을 관리하고 제어할 수 있습니다.
  > * 툴로는 Istio, Linkerd, Consul 등이 있습니다.


## Quest

- 메모장 시스템을 JWT 발급을 위한 마이크로서비스와 실제 비즈니스 로직을 처리하는 마이크로서비스로 나누어 보세요.
- JWT 토큰 발급의 역할을 하는 마이크로서비스를 AWS Lambda와 API Gateway를 이용하여 구축해 보세요.
  > GET https://sl3pq17pel.execute-api.ap-northeast-2.amazonaws.com/token?id=123&name=test
## Advanced

- Istio는 어떤 툴일까요? 이 툴을 Kubernetes와 함께 사용하여 어떤 구조를 구현할 수 있을까요?
